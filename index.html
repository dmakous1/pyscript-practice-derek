<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Input to Pyscript</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
	<py-env>
      - matplotlib
	</py-env>
  </head>
  <body style="margin: 25px 75px 25px 75px;">
    <strong>Graph of Data:</strong>
    <div>Type input here:</div>
    <input type="text" id="y1" value="1"/>
    <input type="text" id="y2" value="2"/>
    <input type="text" id="y3" value="3"/>
    <input type="text" id="y4" value="4"/>
    <button id="submit-button" type="submit" pys-onClick="update_graph">OK</button>
	<div id="graph"/>
	
    <py-script output = "graph">

import numpy as np
import matplotlib.pyplot as plt
import io
import base64

def update_graph(*args, **kwargs):
	y1 = Element('y1').element.value
	y2 = Element('y2').element.value
	y3 = Element('y3').element.value
	y4 = Element('y4').element.value

	x = [1,2,3,4]
	y = [y1,y2,y3,y4]
	x = np.array(x)
	y = np.array(y)
	xfloat = [float(i) for i in x]
	yfloat = [float(i) for i in y]
	x_model = np.arange(0.0,50.0,.01)
	y_model = 2*x_model*x_model
	fig1, ax1 = plt.subplots(1,dpi=150,figsize=(5,3))
	fig1, ax1 = plt.subplots()
	ax1.scatter(yfloat,xfloat)
	ax1.set_title("Graph of Data",fontsize=11)
	ax1.set_xlabel("x variable",fontsize=10)
	ax1.set_ylabel("y variable",fontsize=10)
	plt.plot(x_model, y_model)
	ax1.set_xlim(0,6)
	ax1.set_ylim(0,50)
	ax1.margins(y=0)
	ax1.grid()
	
	img = io.BytesIO()
	fig1.savefig(img, format='png',bbox_inches='tight')
	img.seek(0)
	encoded = base64.b64encode(img.getvalue())
	graph_string = '<img src="data:image/png;base64, {}">'.format(encoded.decode('utf-8'))
	Element('graph').element.innerHTML = graph_string
	</py-script>
  </body>
</html>
